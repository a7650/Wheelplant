/**
 * carousel-z v1.0.3
 * (c) 2019 zzp
 */
(function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Carousel=e()})(this,function(){function t(t){throw new Error(t)}function e(e,i){i&&"[object Object]"===Object.prototype.toString.call(i)?Object.keys(i).forEach(function(t){e.style[t]=i[t]}):t("The second parameter error of 'setStyle' function")}function i(t,e){if(!t)return"";let i=t.match(/[a-zA-Z]/g),n=i?i.join(""):e;return n}function n({width:e,height:i,parentNode:n,img:o,transitionTime:s,duration:a,hover:d,dots:l,tip:h,hidden:c,transitionName:p}){switch(e&&i&&n&&o&&a||t("please check width&&height&&parentNode&&img&&duration"),!0){case"number"!=typeof e&&"string"!=typeof e:r.err("'width' error");break;case"number"!=typeof i&&"string"!=typeof i:r.err("'height' error");break;case"number"!=typeof a&&"string"!=typeof a:r.err("'duration' error")}let u=this,m=r.getUnit(e.toString(),"px"),f=r.getUnit(i.toString(),"px"),g=r.getUnit(s.toString(),"s"),y=document.createElement("div"),x=document.createElement("div"),b=document.createElement("div");this.widthUnit=m,this.width=parseInt(e)+m,this.height=parseInt(i)+f,this.parentNode=1===n.nodeType?n:"string"==typeof n?document.querySelector(n):null,!n&&r.err("'parentNode' error"),this.transitionName="string"==typeof p?p:"carousel-default",this.duration=parseInt(a),s&&(this.transitionTime="number"==typeof parseFloat(s)?parseFloat(s)+g:0),Array.isArray(o)&&o.length?(this.img=o,this.total=o.length):t("'img' error"),this.animation=!1,this.timer=null,this._index=-1,this.container=x,this.dotsNode=b,r.setStyle(y,{position:"relative",width:this.width,height:this.height,overflow:void 0===c?"hidden":c?"hidden":"visible"}),r.setStyle(x,{width:this.width,height:this.height});for(let t of this.img)x.appendChild(this.createImg(t));if(this.allImg=x.children,d&&d.pause&&(x.addEventListener("mouseenter",u.picPause.bind(u)),x.addEventListener("mouseleave",function(){u.timer=setTimeout(function(){u.picPlay()},u.duration)})),l&&l.show){let t={ordinaryColor:"rgba(0,0,0,.5)",activeColor:"#fff",dotSize:"10px",bottomDistance:"20px",transition:"0s",spacing:"10px",turn:!0},e=r._extends({},t,l),i=r.getUnit(e.dotSize,"px"),n=parseInt(e.dotSize),o=(r.getUnit(e.bottomDistance,"px"),n/2+i);this.dotsParams=e,r.setStyle(b,{width:"100%",textAlign:"center",position:"absolute",bottom:e.bottomDistance,zIndex:99});for(let t=0;t<this.total;t++){var v=document.createElement("div");v.index=t,r.setStyle(v,{display:"inline-block",marginRight:e.spacing,transition:e.transition,width:n+i,height:n+i,borderRadius:o,backgroundColor:e.ordinaryColor,cursor:e.turn?"pointer":""}),t===this.total-1&&(v.style.marginRight=0),b.appendChild(v)}e.turn&&b.addEventListener("click",function(t){let e,i,n=t.target;n.index>-1&&n.index!=u.index&&!u.isanimated()&&(e=n.index,u.timer&&clearTimeout(u.timer),i=u.index,u.index=e,u.turn(e,i),u.timer=setTimeout(()=>{u.picPlay()},u.duration))}),y.appendChild(b),Object.defineProperty(u,"index",{enumerable:!0,configurable:!1,get:function(){return u._index},set:function(t){if(t==u._index)return;let e=b.getElementsByTagName("div"),i=-1==u._index?0:u._index,n=t;e[i].style.backgroundColor=u.dotsParams.ordinaryColor,e[n].style.backgroundColor=u.dotsParams.activeColor,u._index=t}})}if(h.show){o.forEach(function(t,e){t.tipMes||r.err("img["+e+"]'s tipMes is undefined"),"string"!=typeof t.tipMes&&r.err("The 'tipMes' attribute is not 'string' type")});let t=r._extends({},{fontColor:"#fff",backgroundColor:"rgba(0,0,0,.5)"},h),e=document.createElement("div");r.setStyle(e,{padding:"6px",color:t.fontColor,backgroundColor:t.backgroundColor,display:"none",position:"fixed",zIndex:100,borderRadius:"3px"}),x.addEventListener("mouseenter",function(t){let i=u.index==u.total?0:u.index;e.innerHTML=o[i].tipMes,e.style.display="block"}),x.addEventListener("mousemove",function(t){e.style.top=`${t.pageY+30}px`,e.style.left=`${t.pageX+16}px`}),x.addEventListener("mouseleave",function(t){e.style.display="none"}),y.appendChild(e)}y.appendChild(x),this.parentNode.appendChild(y)}var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},r={_extends:o,err:t,setStyle:e,getUnit:i};return n.prototype.createImg=function(t){let e=document.createElement("a"),i=document.createElement("img");return r.setStyle(e,{width:this.width,height:this.height,position:"absolute",display:"block",top:0,left:0,display:"none",transitionDuration:this.transitionTime}),r.setStyle(i,{width:this.width,height:this.height}),i.src=t.src,e.href=t.href?t.href:"",e.appendChild(i),e},n.prototype.isanimated=function(){return this.animation},n.prototype.turn=function(t,e){let i,n,o=this.allImg[t],s=this.allImg[e],a=this.transitionTime;t>e||0===t&&e===this.total-1?(i=this.transitionName+"-enter",n=this.transitionName+"-leave"):t<e&&(i=this.transitionName+"-leave",n=this.transitionName+"-enter"),r.setStyle(o,{display:"block",zIndex:2}),o.classList.add(i),setTimeout(function(){o.classList.remove(i)},0),s&&(s.classList.add(n),r.setStyle(s,{zIndex:1}),setTimeout(()=>{s.classList.contains(n)&&(s.classList.remove(n),s.style.display="none"),this.animation=!1},1e3*parseFloat(a)),this.animation=!0)},n.prototype.picPlay=function(){let t=this.index,e=this.index+1;e>=this.total&&(e=0,t=this.total-1),this.index=e,this.container.setAttribute("data-index",this.index),this.turn(e,t),this.timer=setTimeout(()=>{this.picPlay()},this.duration)},n.prototype.picPause=function(){this.timer&&clearTimeout(this.timer)},n});